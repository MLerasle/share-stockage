- content_for(:title, 'Prix')
%section#main-content
	.row.body.sign-in
		.large-10.small-12.columns.large-centered.small-centered
			.create-account
				.row.sign-up
					.large-12.small-12.columns
						%h2 À propos de votre espace
						%hr
						
					.row
						.large-4.medium-4.hide-for-small.columns
							- if @advert.validated
								= link_to advert_step_path(@advert, Advert.form_steps[0]), class: "wizard_link" do
									.panel{ style: "background-color:white" }
										%h4{ style: "color:rgb(185, 185, 185)" }
											%i.fa.fa-info
											Informations générales
								= link_to advert_step_path(@advert, Advert.form_steps[1]), method: :get, class: "wizard_link" do
									.panel{ style: "background-color:white" }
										%h4{ style: "color:rgb(185, 185, 185)" }
											%i.fa.fa-map-marker
											Localisation
								= link_to advert_step_path(@advert, Advert.form_steps[2]), class: "wizard_link" do
									.panel{ style: "background-color:white" }
										%h4{ style: "color:rgb(185, 185, 185)" }									
											%i.fa.fa-edit
											Description
								= link_to advert_step_path(@advert, Advert.form_steps[3]), class: "wizard_link" do
									.panel{ style: "background-color:white; border: 1px solid rgb(84, 151, 86)" }
										%h4{ style: "color:rgb(84, 151, 86)" }
											%i.fa.fa-euro
											Prix
								= link_to new_advert_picture_path(@advert), class: "wizard_link" do
									.panel{ style: "background-color:white" }
										%h4{ style: "color:rgb(185, 185, 185)" }
											%i.fa.fa-file-image-o
											Photos
								= link_to "Retour à mon compte", owner_space_users_path, class: "button radius expand"
							- else
								.panel{ style: "background-color:white" }
									%h4{ style: "color:rgb(185, 185, 185)" }
										%i.fa.fa-info
										Informations générales
								.panel{ style: "background-color:white" }
									%h4{ style: "color:rgb(185, 185, 185)" }
										%i.fa.fa-map-marker
										Localisation
								.panel{ style: "background-color:white" }
									%h4{ style: "color:rgb(185, 185, 185)" }
										%i.fa.fa-edit
										Description
								.panel{ style: "background-color:white; border: 1px solid rgb(84, 151, 86)" }
									%h4{ style: "color:rgb(84, 151, 86)" }
										%i.fa.fa-euro
										Prix
								.panel{ style: "background-color:white" }
									%h4{ style: "color:rgb(185, 185, 185)" }
										%i.fa.fa-file-image-o
										Photos

						.large-8.medium-8.small-12.columns
							%h4 Choisissez le prix de votre espace
							%em{ style: "color:red; font-size: 80%" } Les champs marqués d'un * sont obligatoires.
							%hr
							= form_for @advert, url: wizard_path, method: :put do |f|
								%br
								= f.label "Veuillez indiquer le prix mensuel de votre espace", nil, class: 'required'
								.row.collapse
									.small-3.large-2.columns
										%span.prefix CHF
									.small-9.large-10.columns
										= f.number_field :price, step: "any", label: false, id: "price"
								.row
									.small-12.large-12.columns
										%h6#daily_price
											- if @advert.price
												Soit un montant quotidien de CHF
												= @advert.daily_price

								%hr
								= link_to "Précédent", previous_wizard_path, class: "button small"
								= f.submit "Suivant", class: "button right small"

- content_for :scripts do
	:javascript
		$('#price').bind("keyup mouseup", function(event) {
			var price = document.getElementById('price').value;
			$('#daily_price').html("Vous toucherez CHF " + Math.round(price / 30 * 100) / 100 + " par jour de location.");
			$('#price_with_commission').html("Le montant affiché sur le site, tenant compte de la commission perçue par Share Stockage, sera de CHF " + Math.round(price * 1.08 * 100) / 100);
		});